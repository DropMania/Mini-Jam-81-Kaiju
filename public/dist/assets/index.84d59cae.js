var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{o,c,a as r,F as u,r as d,b as v,u as m,p as g,d as p,e as h,f as k,g as y,w as j,h as f,i as b,v as w,j as A,k as C,l as I,m as K,n as S,t as L,q as E,s as O,x as T,y as D}from"./vendor.9152a2cf.js";const x={},B=r("div",{class:"bg"},null,-1);x.render=function(e,a){const t=d("router-view");return o(),c(u,null,[B,r(t)],64)};var M=async(e,a={})=>(await fetch(`https://worldsbestkaiju.herokuapp.com/${e}`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)})).json(),U=v({kaiju:{},all:[]});const G={class:"home"},P=r("div",{class:"title-big"},"The Worlds best kaiju",-1),F={expose:[],setup(e){let a=m();function t(){a.push({name:"Creator"})}return null!=localStorage.getItem("my-kaiju")&&M("getKaiju",{id:localStorage.getItem("my-kaiju")}).then((e=>{e&&(U.kaiju=e,a.push({name:"Game"}))})),(e,a)=>(o(),c("div",G,[P,r("button",{onClick:t},"Create Kaiju")]))}},H=["  0,   0,   0","228, 166, 114","184, 111,  80","116,  63,  57"," 63,  40,  50","158,  40,  53","229,  59,  68","251, 146,  43","255, 231,  98"," 99, 198,  77"," 50, 115,  69"," 25,  61,  63"," 79, 103, 129","175, 191, 210","255, 255, 255"," 44, 232, 244","  4, 132, 209"];const N={setup(e){let a,t=H,s=h(null),l=!1,i=[0,0,0],n={},o=!1;function c(e,a,t){let s=4*e+32*a*4;t[s]=o?0:i[0],t[s+1]=o?0:i[1],t[s+2]=o?0:i[2],t[s+3]=o?0:255}function r(e,a,t){let s=4*e+32*a*4;return`${t[s]},${t[s+1]},${t[s+2]},${t[s+3]}`}return k((()=>{a=s.value.getContext("2d"),n=a.getImageData(0,0,32,32);for(var e=0;e<n.data.length;e+=4)n.data[e]=0,n.data[e+1]=0,n.data[e+2]=0,n.data[e+3]=0;a.putImageData(n,0,0);let{x:t,y:i}=s.value.getBoundingClientRect();function o(e){if(l){c(Math.floor((e.x-t)/16),Math.floor((e.y-i)/16),n.data),a.putImageData(n,0,0)}}function u(e,t,s,l){r(e,t-1,l.data)==s&&(c(e,t-1,l.data),u(e,t-1,s,l)),r(e,t+1,l.data)==s&&(c(e,t+1,l.data),u(e,t+1,s,l)),r(e-1,t,l.data)==s&&(c(e-1,t,l.data),u(e-1,t,s,l)),r(e+1,t,l.data)==s&&(c(e+1,t,l.data),u(e+1,t,s,l)),c(e,t,l.data),a.putImageData(l,0,0)}s.value.addEventListener("mousedown",(e=>{e.ctrlKey?function(e){let a=Math.floor((e.x-t)/16),s=Math.floor((e.y-i)/16),l=r(a,s,n.data);u(a,s,l,n)}(e):(l=!0,o(e))})),s.value.addEventListener("mouseup",(e=>{l=!1})),s.value.addEventListener("mouseleave",(e=>{l=!1})),s.value.addEventListener("mousemove",o)})),{cnvs:s,getBase64:()=>s.value.toDataURL(),setColor:e=>i=e.split(","),colors:t,props:e,toggleEraser:()=>o=!o,eraserMode:o}}},W=j();g("data-v-c1b4cc60");const Y={class:"frame"},Q={class:"cnvs"},V={id:"game",width:"32",height:"32",ref:"cnvs"},_={class:"colors"};p();const z=W(((e,a,t,s,l,i)=>(o(),c("div",Y,[r("div",Q,[r("canvas",V,null,512),r("div",_,[(o(!0),c(u,null,y(s.colors,(e=>(o(),c("div",{class:"color",key:e,onClick:a=>s.setColor(e),style:{backgroundColor:`rgb(${e})`}},null,12,["onClick"])))),128))])])]))));N.render=z,N.__scopeId="data-v-c1b4cc60";const R={class:"KaijuCreator"},J={class:"KaijuImage"},$=r("div",{class:"title-med"},"Draw your Kaiju:",-1),q=C(" Hold CTRL for fill-mode "),X={class:"KaijuText"},Z=r("div",{class:"title-med"},"Name your Kaiju:",-1),ee={expose:[],setup(e){let a=m(),t=h(""),s=h(null),l=h(!1);async function i(){let e={img:s.value.getBase64(),name:t.value},l=await M("createkaiju",e);U.kaiju=l,null!=localStorage.getItem("my-kaiju")&&await M("removekaiju",{id:localStorage.getItem("my-kaiju")}),localStorage.setItem("my-kaiju",l.id),a.push({name:"Game"})}return(e,a)=>(o(),c("div",R,[r("div",J,[$,q,r(N,{ref:s},null,512),r("button",{onClick:a[1]||(a[1]=e=>(f(s).toggleEraser(),console.log("test"),void(l.value=!l.value))),style:{filter:`invert(${f(l)?1:0})`}}," eraser ",4)]),r("div",X,[Z,b(r("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>A(t)?t.value=e:t=e),class:"input",placeholder:"Name..."},null,512),[[w,f(t)]]),r("button",{onClick:i},"Create!")])]))}};const ae={props:{change:Function,type:String,width:String,height:String},setup:e=>(console.log(e),{close:function(){e.change(e.type)},props:e})},te={class:"modal-bg"},se={class:"content"};ae.render=function(e,a,t,s,l,i){return o(),c("div",te,[r("div",{class:"window",style:{width:s.props.width,height:s.props.height}},[r("div",se,[I(e.$slots,"default")]),"no-button"!=s.props.type?(o(),c("button",{key:0,onClick:a[1]||(a[1]=(...e)=>s.close&&s.close(...e))}," Close ")):K("",!0)],4)])};const le={class:"city"},ie=r("div",{class:"title-med"},"Destroying Cities...",-1),ne={class:"title-med"},oe=C(" Keep this window open to level up over time! "),ce={class:"city-scene"},re={class:"me"},ue=r("div",{class:"cityimg"},[r("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAUlJREFUWIXtV8sNwyAMdSKGySmnSgzSTRikmzBIpZxyyjbpyZHl2MYQmkPVJ0XkA/bjYRsC0IgU8946lmK46vz1frptSKTHK841oxbWbTkuAIBQcgBwnuW6LTBPj6OtAe8vKoDssNWM1Drn9gEEBbwGJAU86nE0EbAUoLPTFKLvuypgOdUI3q6AKwhLQWYF6Tw9jksDHadmAc3VGoKlDOJQFbBmUetEso8ILTXdUsC7fNhnpC9pay2BpYBn+ai6QWJdSiWPAhZo+n5FAe2bhC4KWHGUYt55Oab2uymA954gPG3HPWIA75sqYW8FeA1JMe90mU6VUFLAKkQeBTg5bTIBO9DdjcvIg0zaDa3TkbVjDt5K2HL8omPRMZ/ckGLeSwqUnilBz4GE4nYFONQsoC0fLGVJaaxG3q2AF7VH9u4EalH9Z/Qn8HMEPrMvXdrg56wGAAAAAElFTkSuQmCC"})],-1),de={expose:[],setup(e){let a;return k((async()=>{if("NONE"==U.kaiju.state){let e=await M("startcity",{id:U.kaiju.id});U.kaiju=e}a=setInterval((async()=>{let e=await M("getKaiju",{id:U.kaiju.id});U.kaiju=e}),5e3)})),S((async()=>{let e=await M("endcity",{id:U.kaiju.id});U.kaiju=e,clearInterval(a)})),(e,a)=>(o(),c("div",le,[ie,r("div",ne,"Level: "+L(f(U).kaiju.level),1),oe,r("div",ce,[r("div",re,[r("img",{src:f(U).kaiju.img},null,8,["src"])]),ue])]))}};const ve={class:"fight"},me={key:0,class:"leaderboard"},ge=E('<div class="header"><span class="title-med">Level</span><span class="title-med">Name</span><span class="title-med">Kaiju</span><span class="title-med" style="font-size:2.5rem;"> win chance </span><span class="title-med" style="font-size:2.5rem;"> level to win </span><span></span></div>',1),pe={class:"level"},he={class:"name"},ke={class:"kaiju"},ye={class:"win"},je={class:"score"},fe={class:"fightBtn"},be={key:1,class:"fighting"},we={class:"title-med"},Ae={class:"fight-scene"},Ce={class:"me"},Ie={class:"him"},Ke={key:2,class:"result"},Se={class:"title-med"},Le={style:{"font-size":"2.5rem"}},Ee={class:"win-scene"},Oe=r("img",{src:"/assets/burn.c1b1e9f3.gif",class:"burn"},null,-1),Te={expose:[],setup(e){let d=h([]),v=h(!1),m=h(!1),g=h({name:"",img:""}),p=h("");async function j(){let e=await M("getall");U.all=e,d.value=e.filter((e=>e.id!=U.kaiju.id&&!e.alive)).map((e=>{let o=U.kaiju.level+e.level;return c=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&n(e,t,a[t]);if(s)for(var t of s(a))i.call(a,t)&&n(e,t,a[t]);return e})({},e),r={chance:Math.round(U.kaiju.level/o*100),score:10-Math.floor(Math.round(U.kaiju.level/o*100)/10)},a(c,t(r));var c,r})),d.value.sort(((e,a)=>a.chance-e.chance))}return k((()=>{j()})),(e,a)=>(o(),c("div",ve,[f(v)||f(m)?K("",!0):(o(),c("div",me,[ge,(o(!0),c(u,null,y(f(d),(e=>(o(),c("div",{key:e.id,class:"kaijus"},[r("span",pe,L(e.level),1),r("span",he,L(e.name),1),r("span",ke,[r("img",{src:e.img},null,8,["src"])]),r("span",ye,L(e.chance)+"%",1),r("span",je,L(e.score),1),r("span",fe,[r("button",{onClick:a=>function(e){g.value=e;let a=!1;Math.random()<=e.chance/100&&(a=!0),p.value=a?"won":"lost";let t=10-Math.floor(e.chance/10);v.value=!0,setTimeout((async()=>{console.log(a),m.value=!0,v.value=!1;let e=await M("fight",{id:U.kaiju.id,win:a,score:t});setTimeout((async()=>{m.value=!1,U.kaiju=e,j()}),5e3)}),5e3)}(e)},"Fight!",8,["onClick"])])])))),128))])),f(v)?(o(),c("div",be,[r("span",we,"fighting against "+L(f(g).name),1),r("div",Ae,[r("div",Ce,[r("img",{src:f(U).kaiju.img},null,8,["src"])]),r("div",Ie,[r("img",{src:f(g).img},null,8,["src"])])])])):K("",!0),f(m)?(o(),c("div",Ke,[r("span",Se,"you have "+L(f(p)),1),r("span",Le,"you earned "+L(f(g).score)+" level!",1),r("div",Ee,[r("img",{class:"loser",src:"won"==f(p)?f(g).img:f(U).kaiju.img},null,8,["src"]),Oe])])):K("",!0)]))}};g("data-v-46a2f927");const De={class:"leaderboard"},xe=r("div",{class:"header"},[r("span",{class:"title-med"},"Level"),r("span",{class:"title-med"},"Kaiju")],-1),Be={class:"level"},Me={class:"name"},Ue={class:"kaiju"};p();const Ge={expose:[],setup(e){let a=h([]);return k((async()=>{let e=await M("getall");U.all=e,a.value=e.sort(((e,a)=>a.level-e.level))})),(e,t)=>(o(),c("div",De,[xe,(o(!0),c(u,null,y(f(a),(e=>(o(),c("div",{key:e.id,class:"kaijus"},[r("span",Be,L(e.level),1),r("span",Me,L(e.name),1),r("span",Ue,[r("img",{src:e.img},null,8,["src"])])])))),128))]))},__scopeId:"data-v-46a2f927"};const Pe={class:"death"},Fe=r("div",{class:"title-med"},"Youre Dead :(",-1),He=r("p",{class:"notover"},[C(" However Death is not the end for a Kaiju "),r("br"),C(" Your Kaiju heals over time"),r("br"),C(" check in later to see if your kaiju is back alive "),r("br"),C(" although it will take some for it to recover ")],-1),Ne={expose:[],setup(e){let a;return k((async()=>{a=setInterval((async()=>{let e=await M("getKaiju",{id:U.kaiju.id});U.kaiju=e}),5e3)})),S((()=>{clearInterval(a)})),(e,a)=>(o(),c("div",Pe,[Fe,He]))}};const We=j();g("data-v-4885d060");const Ye={class:"game"},Qe={class:"gameKaiju"},Ve={class:"title-big"},_e={class:"gameInputs"},ze={class:"title-med"};p();const Re={expose:[],setup(e){let a=m(),t=h(!1),s=h(!1),l=h(!1);function i(e){switch(e){case"city":t.value=!t.value;break;case"fight":s.value=!s.value;break;case"leaderboard":l.value=!l.value}}return k((async()=>{if(null!=localStorage.getItem("my-kaiju")){let e=await M("getKaiju",{id:localStorage.getItem("my-kaiju")});U.kaiju=e,"CITY"==U.kaiju.state&&(t.value=!0)}else a.push({name:"Home"})})),console.log(U),(e,a)=>(o(),c("div",Ye,[r("div",Qe,[r("div",Ve,L(f(U).kaiju.name),1),r("img",{class:"kaijuImage",src:f(U).kaiju.img},null,8,["src"])]),r("div",_e,[r("div",ze,"Level: "+L(f(U).kaiju.level),1),r("button",{onClick:a[1]||(a[1]=e=>i("city"))}," Destroy cities and level up! "),r("button",{onClick:a[2]||(a[2]=e=>i("fight"))}," fight against other Kaiju! "),r("button",{onClick:a[3]||(a[3]=e=>i("leaderboard"))}," View Leaderboard! ")]),f(t)?(o(),c(ae,{key:0,type:"city",change:i,width:"40%",height:"40%"},{default:We((()=>[r(de)])),_:1})):K("",!0),f(s)?(o(),c(ae,{key:1,type:"fight",change:i,width:"70%",height:"90%"},{default:We((()=>[r(Te)])),_:1})):K("",!0),f(l)?(o(),c(ae,{key:2,type:"leaderboard",change:i,width:"50%",height:"90%"},{default:We((()=>[r(Ge)])),_:1})):K("",!0),f(U).kaiju.alive?K("",!0):(o(),c(ae,{key:3,type:"no-button",change:i,width:"80%",height:"80%"},{default:We((()=>[r(Ne)])),_:1}))]))},__scopeId:"data-v-4885d060"},Je=[{path:"/",name:"Home",component:F},{path:"/creator",name:"Creator",component:ee},{path:"/game",name:"Game",component:Re}],$e=O({history:T(),routes:Je});D(x).use($e).mount("#app");
